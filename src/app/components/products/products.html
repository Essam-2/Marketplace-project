<section class="products-cards">
  <div class="product-header">
    <h1 class="title">Our Products</h1>
    <button mat-raised-button color="primary" (click)="goToCart()" class="cart-button">
      <mat-icon aria-hidden="false" [matBadge]="cartItemCount" [matBadgeHidden]="cartItemCount === 0" matBadgeColor="warn">shopping_cart</mat-icon>
      View Cart
    </button>
  </div>
  <p class="subtitle">Available products in the marketplace</p>
  <div class="cards">
    <mat-card *ngFor="let p of data" class="example-card product-card" appearance="outlined">
      <img mat-card-image [src]="p.image || '/assets/placeholder-header.jpg'" alt="{{ p.name }}" />
      <mat-card-header>
        <mat-card-title>{{ p.name }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>{{ p.description }}</p>
        <p><strong>Price:</strong> ${{ p.price }}</p>
        <p [class.out-of-stock]="!p.availableQuantity || p.availableQuantity <= 0">
          <strong>Available:</strong> {{ p.availableQuantity || 0 }} in stock
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button 
          mat-raised-button 
          color="accent" 
          (click)="viewProductDetails(p)">
          <mat-icon>visibility</mat-icon>
          View Details
        </button>
        <button 
          mat-raised-button 
          color="primary" 
          (click)="addToCart(p)"
          [disabled]="!p.availableQuantity || p.availableQuantity <= 0">
          <mat-icon>add_shopping_cart</mat-icon>
          {{ (!p.availableQuantity || p.availableQuantity <= 0) ? 'Out of Stock' : 'Add to Cart' }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</section>
